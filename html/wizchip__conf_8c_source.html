<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>Socket APIs: D:/WORK/2.PROJECTs/IPv4/W5500/4.ioLibrary/ioLibrary_BSD_Ethernet_V102/Ethernet/wizchip_conf.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Socket APIs
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_69aa456a01b663892012be3e9793b49e.html">ioLibrary_BSD_Ethernet_V102</a></li><li class="navelem"><a class="el" href="dir_023e6c318feb6113279b384583cc9f83.html">Ethernet</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">wizchip_conf.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="wizchip__conf_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//****************************************************************************/ </span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">//*****************************************************************************/</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="wizchip__conf_8h.html" title="WIZCHIP Config Header File. ">wizchip_conf.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="code" href="wizchip__conf_8c.html#a0670b3769d0093cff1d4539d0067c0f3">   47</a></span>&#160;<span class="keywordtype">void</span>      <a class="code" href="wizchip__conf_8c.html#a0670b3769d0093cff1d4539d0067c0f3" title="Default function to enable interrupt. ">wizchip_cris_enter</a>(<span class="keywordtype">void</span>)           {};</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="code" href="wizchip__conf_8c.html#a558a7118b574e41fd9edb3de0bbbd4f0">   53</a></span>&#160;<span class="keywordtype">void</span>      <a class="code" href="wizchip__conf_8c.html#a558a7118b574e41fd9edb3de0bbbd4f0" title="Default function to disable interrupt. ">wizchip_cris_exit</a>(<span class="keywordtype">void</span>)          {};</div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="code" href="wizchip__conf_8c.html#a244d1c94f43c6c4a6c0e5b17357e1f5c">   59</a></span>&#160;<span class="keywordtype">void</span>    <a class="code" href="wizchip__conf_8c.html#a244d1c94f43c6c4a6c0e5b17357e1f5c" title="Default function to select chip. ">wizchip_cs_select</a>(<span class="keywordtype">void</span>)            {};</div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="code" href="wizchip__conf_8c.html#aeed928f8cddb547702ee3937fadcb727">   65</a></span>&#160;<span class="keywordtype">void</span>    <a class="code" href="wizchip__conf_8c.html#aeed928f8cddb547702ee3937fadcb727" title="Default function to deselect chip. ">wizchip_cs_deselect</a>(<span class="keywordtype">void</span>)          {};</div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="code" href="wizchip__conf_8c.html#ae6c3296f0b6471c9fb26399bd4bfaf40">   71</a></span>&#160;uint8_t <a class="code" href="wizchip__conf_8c.html#ae6c3296f0b6471c9fb26399bd4bfaf40" title="Default function to read in direct or indirect interface. ">wizchip_bus_readbyte</a>(uint32_t AddrSel) { <span class="keywordflow">return</span> * ((<span class="keyword">volatile</span> uint8_t *) AddrSel); };</div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="code" href="wizchip__conf_8c.html#a72e190dec22638a14f5a6df75335f5b7">   78</a></span>&#160;<span class="keywordtype">void</span>    <a class="code" href="wizchip__conf_8c.html#a72e190dec22638a14f5a6df75335f5b7" title="Default function to write in direct or indirect interface. ">wizchip_bus_writebyte</a>(uint32_t AddrSel, uint8_t wb)  { *((<span class="keyword">volatile</span> uint8_t*)AddrSel) = wb; };</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="code" href="wizchip__conf_8c.html#aa2207654c49a9f57887feaf9921a05a9">   84</a></span>&#160;uint8_t <a class="code" href="wizchip__conf_8c.html#aa2207654c49a9f57887feaf9921a05a9" title="Default function to read in SPI interface. ">wizchip_spi_readbyte</a>(<span class="keywordtype">void</span>)        {<span class="keywordflow">return</span> 0;};</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="code" href="wizchip__conf_8c.html#a4e493cf7e22451f15725d15891ad9b23">   90</a></span>&#160;<span class="keywordtype">void</span>    <a class="code" href="wizchip__conf_8c.html#a4e493cf7e22451f15725d15891ad9b23" title="Default function to write in SPI interface. ">wizchip_spi_writebyte</a>(uint8_t wb) {};</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno"><a class="code" href="wizchip__conf_8h.html#ad0efd19f6465f2071d41dbf2a9090133">   95</a></span>&#160;<a class="code" href="struct_____w_i_z_c_h_i_p.html" title="The set of callback functions for W5500:WIZCHIP_IO_Functions W5200:WIZCHIP_IO_Functions_W5200. ">_WIZCHIP</a>  <a class="code" href="wizchip__conf_8c.html#ad0efd19f6465f2071d41dbf2a9090133">WIZCHIP</a> =</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      .<a class="code" href="struct_____w_i_z_c_h_i_p.html#afd3fb2202be6b98ba76750dbca407d6d" title="WIZCHIP ID such as 5100, 5200, 5500, and so on. ">id</a>                  = <a class="code" href="wizchip__conf_8h.html#a205bfecb2fd9a65b896384de0e957e4b">_WIZCHIP_ID_</a>,</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      .if_mode             = <a class="code" href="wizchip__conf_8h.html#a564c20a8415e89b641b600bf4542e94c" title="Define interface mode.  . ">_WIZCHIP_IO_MODE_</a>,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      .CRIS._enter         = <a class="code" href="wizchip__conf_8c.html#a0670b3769d0093cff1d4539d0067c0f3" title="Default function to enable interrupt. ">wizchip_cris_enter</a>,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      .CRIS._exit          = <a class="code" href="wizchip__conf_8c.html#a558a7118b574e41fd9edb3de0bbbd4f0" title="Default function to disable interrupt. ">wizchip_cris_exit</a>,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      .CS._select          = <a class="code" href="wizchip__conf_8c.html#a244d1c94f43c6c4a6c0e5b17357e1f5c" title="Default function to select chip. ">wizchip_cs_select</a>,</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      .CS._deselect        = <a class="code" href="wizchip__conf_8c.html#aeed928f8cddb547702ee3937fadcb727" title="Default function to deselect chip. ">wizchip_cs_deselect</a>,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      .IF.BUS._read_byte   = <a class="code" href="wizchip__conf_8c.html#ae6c3296f0b6471c9fb26399bd4bfaf40" title="Default function to read in direct or indirect interface. ">wizchip_bus_readbyte</a>,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      .IF.BUS._write_byte  = <a class="code" href="wizchip__conf_8c.html#a72e190dec22638a14f5a6df75335f5b7" title="Default function to write in direct or indirect interface. ">wizchip_bus_writebyte</a></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">//    .IF.SPI._read_byte   = wizchip_spi_readbyte,</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">//    .IF.SPI._write_byte  = wizchip_spi_writebyte</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      };</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keyword">static</span> uint8_t    _DNS_[4];      <span class="comment">// DNS server ip address</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">static</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ga76e5aa4ff40d1cb562e46e3bf9b1e9d1">dhcp_mode</a>  _DHCP_;        <span class="comment">// DHCP mode</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno"><a class="code" href="wizchip__conf_8h.html#a658e320e9c986ecab81857a8716b8b87">  112</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="wizchip__conf_8c.html#a658e320e9c986ecab81857a8716b8b87" title="Registers call back function for critical section of I/O functions such as WIZCHIP_READ, WIZCHIP_WRITE, WIZCHIP_READ_BUF and WIZCHIP_WRITE_BUF. ">reg_wizchip_cris_cbfunc</a>(<span class="keywordtype">void</span>(*cris_en)(<span class="keywordtype">void</span>), <span class="keywordtype">void</span>(*cris_ex)(<span class="keywordtype">void</span>))</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   <span class="keywordflow">if</span>(!cris_en || !cris_ex)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#ae94e8a795064229659a267844aff02a6">CRIS</a>.<a class="code" href="struct_____w_i_z_c_h_i_p_1_1___c_r_i_s.html#a4b960e85f7703705795f4965252c8fb7" title="crtical section enter ">_enter</a> = <a class="code" href="wizchip__conf_8c.html#a0670b3769d0093cff1d4539d0067c0f3" title="Default function to enable interrupt. ">wizchip_cris_enter</a>;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#ae94e8a795064229659a267844aff02a6">CRIS</a>.<a class="code" href="struct_____w_i_z_c_h_i_p_1_1___c_r_i_s.html#af41262773a26ab77f20c2559830e6fbb" title="critial section exit ">_exit</a>  = <a class="code" href="wizchip__conf_8c.html#a558a7118b574e41fd9edb3de0bbbd4f0" title="Default function to disable interrupt. ">wizchip_cris_exit</a>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#ae94e8a795064229659a267844aff02a6">CRIS</a>.<a class="code" href="struct_____w_i_z_c_h_i_p_1_1___c_r_i_s.html#a4b960e85f7703705795f4965252c8fb7" title="crtical section enter ">_enter</a> = cris_en;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#ae94e8a795064229659a267844aff02a6">CRIS</a>.<a class="code" href="struct_____w_i_z_c_h_i_p_1_1___c_r_i_s.html#af41262773a26ab77f20c2559830e6fbb" title="critial section exit ">_exit</a>  = cris_ex;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="code" href="wizchip__conf_8h.html#a63208f3ad63e6290be0ed33705baa27e">  126</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="wizchip__conf_8c.html#a63208f3ad63e6290be0ed33705baa27e" title="Registers call back function for WIZCHIP select &amp; deselect. ">reg_wizchip_cs_cbfunc</a>(<span class="keywordtype">void</span>(*cs_sel)(<span class="keywordtype">void</span>), <span class="keywordtype">void</span>(*cs_desel)(<span class="keywordtype">void</span>))</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <span class="keywordflow">if</span>(!cs_sel || !cs_desel)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a402f9b854611a764645391a1c83d1e5c">CS</a>.<a class="code" href="struct_____w_i_z_c_h_i_p_1_1___c_s.html#a5e55ee4b2d0fb49a7b4eaed60e9cae5c" title="_WIZCHIP_ selected ">_select</a>   = <a class="code" href="wizchip__conf_8c.html#a244d1c94f43c6c4a6c0e5b17357e1f5c" title="Default function to select chip. ">wizchip_cs_select</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a402f9b854611a764645391a1c83d1e5c">CS</a>.<a class="code" href="struct_____w_i_z_c_h_i_p_1_1___c_s.html#a494f6cb7ff8cf3b229804ed7299faee1" title="_WIZCHIP_ deselected ">_deselect</a> = <a class="code" href="wizchip__conf_8c.html#aeed928f8cddb547702ee3937fadcb727" title="Default function to deselect chip. ">wizchip_cs_deselect</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a402f9b854611a764645391a1c83d1e5c">CS</a>.<a class="code" href="struct_____w_i_z_c_h_i_p_1_1___c_s.html#a5e55ee4b2d0fb49a7b4eaed60e9cae5c" title="_WIZCHIP_ selected ">_select</a>   = cs_sel;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a402f9b854611a764645391a1c83d1e5c">CS</a>.<a class="code" href="struct_____w_i_z_c_h_i_p_1_1___c_s.html#a494f6cb7ff8cf3b229804ed7299faee1" title="_WIZCHIP_ deselected ">_deselect</a> = cs_desel;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno"><a class="code" href="wizchip__conf_8h.html#ae6ad00c6e026b8bf0d65d1db94f3a8bf">  140</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="wizchip__conf_8c.html#ae6ad00c6e026b8bf0d65d1db94f3a8bf" title="Registers call back function for bus interface. ">reg_wizchip_bus_cbfunc</a>(uint8_t(*bus_rb)(uint32_t addr), <span class="keywordtype">void</span> (*bus_wb)(uint32_t addr, uint8_t wb))</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="keywordflow">while</span>(!(WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a32fec318d5bfa58b3ebd8493959a1b31" title="host interface mode ">if_mode</a> &amp; <a class="code" href="wizchip__conf_8h.html#ab278798369281104991526236f5e1a40">_WIZCHIP_IO_MODE_BUS_</a>));</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <span class="keywordflow">if</span>(!bus_rb || !bus_wb)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a291506b4dba5a525c3fb088809909dfe">IF</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#a39981ec4acc9cac30fba3c89440b34b6">BUS</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#adbfc4d1520d821c8bff62e2f91c1e2ca">_read_byte</a>   = <a class="code" href="wizchip__conf_8c.html#ae6c3296f0b6471c9fb26399bd4bfaf40" title="Default function to read in direct or indirect interface. ">wizchip_bus_readbyte</a>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a291506b4dba5a525c3fb088809909dfe">IF</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#a39981ec4acc9cac30fba3c89440b34b6">BUS</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#aedb77be091985b47939be13bb96bb353">_write_byte</a>  = <a class="code" href="wizchip__conf_8c.html#a72e190dec22638a14f5a6df75335f5b7" title="Default function to write in direct or indirect interface. ">wizchip_bus_writebyte</a>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a291506b4dba5a525c3fb088809909dfe">IF</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#a39981ec4acc9cac30fba3c89440b34b6">BUS</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#adbfc4d1520d821c8bff62e2f91c1e2ca">_read_byte</a>   = bus_rb;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a291506b4dba5a525c3fb088809909dfe">IF</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#a39981ec4acc9cac30fba3c89440b34b6">BUS</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#aedb77be091985b47939be13bb96bb353">_write_byte</a>  = bus_wb;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="code" href="wizchip__conf_8h.html#ab8b1906597683424d5f599e6fd720386">  156</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="wizchip__conf_8c.html#ab8b1906597683424d5f599e6fd720386" title="Registers call back function for SPI interface. ">reg_wizchip_spi_cbfunc</a>(uint8_t (*spi_rb)(<span class="keywordtype">void</span>), <span class="keywordtype">void</span> (*spi_wb)(uint8_t wb))</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   <span class="keywordflow">while</span>(!(WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a32fec318d5bfa58b3ebd8493959a1b31" title="host interface mode ">if_mode</a> &amp; <a class="code" href="wizchip__conf_8h.html#a6179151fb8739a740799328f4f2beaa8">_WIZCHIP_IO_MODE_SPI_</a>));</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   <span class="keywordflow">if</span>(!spi_rb || !spi_wb)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a291506b4dba5a525c3fb088809909dfe">IF</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#a50d58c63f70671976672aa3051e36758">SPI</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#adbfc4d1520d821c8bff62e2f91c1e2ca">_read_byte</a>   = <a class="code" href="wizchip__conf_8c.html#aa2207654c49a9f57887feaf9921a05a9" title="Default function to read in SPI interface. ">wizchip_spi_readbyte</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a291506b4dba5a525c3fb088809909dfe">IF</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#a50d58c63f70671976672aa3051e36758">SPI</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#aedb77be091985b47939be13bb96bb353">_write_byte</a>  = <a class="code" href="wizchip__conf_8c.html#a4e493cf7e22451f15725d15891ad9b23" title="Default function to write in SPI interface. ">wizchip_spi_writebyte</a>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a291506b4dba5a525c3fb088809909dfe">IF</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#a50d58c63f70671976672aa3051e36758">SPI</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#adbfc4d1520d821c8bff62e2f91c1e2ca">_read_byte</a>   = spi_rb;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#a291506b4dba5a525c3fb088809909dfe">IF</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#a50d58c63f70671976672aa3051e36758">SPI</a>.<a class="code" href="union_____w_i_z_c_h_i_p_1_1___i_f.html#aedb77be091985b47939be13bb96bb353">_write_byte</a>  = spi_wb;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga0ff8fc15549599a1d08dc5ec378779d9">  172</a></span>&#160;int8_t <a class="code" href="group__extra__functions.html#ga0ff8fc15549599a1d08dc5ec378779d9" title="Controls to the WIZCHIP. ">ctlwizchip</a>(<a class="code" href="group___d_a_t_a___t_y_p_e.html#gaca023f09ee4830a55aa38846e1bb3b44">ctlwizchip_type</a> cwtype, <span class="keywordtype">void</span>* arg)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   uint8_t tmp = 0;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   uint8_t* ptmp[2] = {0,0};</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <span class="keywordflow">switch</span>(cwtype)</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a658f1f4cff4a15ea70b4104599d7d928" title="Resets WIZCHIP by softly. ">CW_RESET_WIZCHIP</a>:</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;         <a class="code" href="group__extra__functions.html#ga4033269f88b0e202837c4c56a1d8d437" title="Reset WIZCHIP by softly. ">wizchip_sw_reset</a>();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a1f6e10c920debcccf93c41af570150df" title="Inializes to WIZCHIP with SOCKET buffer size 2 or 1 dimension array typed uint8_t. ">CW_INIT_WIZCHIP</a>:</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;         <span class="keywordflow">if</span>(arg != 0) </div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;         {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            ptmp[0] = (uint8_t*)arg;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            ptmp[1] = ptmp[0] + <a class="code" href="wizchip__conf_8h.html#a70a4c5d01d3afb9fab3b6070ac27c857" title="The count of independant socket of WIZCHIP. ">_WIZCHIP_SOCK_NUM_</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;         }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="group__extra__functions.html#ga1bd1977c0db22c93e1841f8353dd919e" title="Initializes WIZCHIP with socket buffer size. ">wizchip_init</a>(ptmp[0], ptmp[1]);;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a3b90ceaac37ec1636979219c316c1b45" title="Clears interrupt. ">CW_CLR_INTERRUPT</a>:</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;         <a class="code" href="group__extra__functions.html#ga41f91261077bc64e240d506923c29181" title="Clear Interrupt of WIZCHIP. ">wizchip_clrinterrupt</a>(*((<a class="code" href="group___d_a_t_a___t_y_p_e.html#gac6b85cbd7d245ccf3cbfa734760d6ed3">intr_kind</a>*)arg));</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a007ca9d990edd2b22d4f3514d2413b6d" title="Get Interrupt status of WIZCHIP. ">CW_GET_INTERRUPT</a>:</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        *((<a class="code" href="group___d_a_t_a___t_y_p_e.html#gac6b85cbd7d245ccf3cbfa734760d6ed3">intr_kind</a>*)arg) = <a class="code" href="group__extra__functions.html#gae5858fe7ca3d498e9fec4c3457a02e2e" title="Get Interrupt of WIZCHIP. ">wizchip_getinterrupt</a>();</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a8f81b377b722b8b23150b1a3a042b15f" title="Masks interrupt. ">CW_SET_INTRMASK</a>:</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;         <a class="code" href="group__extra__functions.html#gafb30bdc1c5333b6bb67bdd20399b0f38" title="Mask or Unmask Interrupt of WIZCHIP. ">wizchip_setinterruptmask</a>(*((<a class="code" href="group___d_a_t_a___t_y_p_e.html#gac6b85cbd7d245ccf3cbfa734760d6ed3">intr_kind</a>*)arg));</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         <span class="keywordflow">break</span>;         </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44abf692c901c5d846b71f177e72e0ac19b" title="Get interrupt mask. ">CW_GET_INTRMASK</a>:</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;         *((<a class="code" href="group___d_a_t_a___t_y_p_e.html#gac6b85cbd7d245ccf3cbfa734760d6ed3">intr_kind</a>*)arg) = <a class="code" href="group__extra__functions.html#ga54ab95788a37781b24e2279022a8705b" title="Get Interrupt mask of WIZCHIP. ">wizchip_getinterruptmask</a>();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor">   #if _WIZCHIP_ &gt; 5100</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor"></span>      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a49966d90dff60c38ab6e76654f9ac59f" title="Set interval time between the current and next interrupt. ">CW_SET_INTRTIME</a>:</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;         setINTLEVEL(*(uint16_t*)arg);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a1c5fe1039a8a0638b5c099b37c0d6b3b" title="Set interval time between the current and next interrupt. ">CW_GET_INTRTIME</a>:</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;         *(uint16_t*)arg = getINTLEVEL();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="preprocessor">   #endif</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor"></span>      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a3e9b9f42781403e72f58e31730ba9368" title="Gets WIZCHIP name. ">CW_GET_ID</a>:</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;         ((uint8_t*)arg)[0] = WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#afd3fb2202be6b98ba76750dbca407d6d" title="WIZCHIP ID such as 5100, 5200, 5500, and so on. ">id</a>[0];</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;         ((uint8_t*)arg)[1] = WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#afd3fb2202be6b98ba76750dbca407d6d" title="WIZCHIP ID such as 5100, 5200, 5500, and so on. ">id</a>[1];</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;         ((uint8_t*)arg)[2] = WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#afd3fb2202be6b98ba76750dbca407d6d" title="WIZCHIP ID such as 5100, 5200, 5500, and so on. ">id</a>[2];</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;         ((uint8_t*)arg)[3] = WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#afd3fb2202be6b98ba76750dbca407d6d" title="WIZCHIP ID such as 5100, 5200, 5500, and so on. ">id</a>[3];</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;         ((uint8_t*)arg)[4] = WIZCHIP.<a class="code" href="struct_____w_i_z_c_h_i_p.html#afd3fb2202be6b98ba76750dbca407d6d" title="WIZCHIP ID such as 5100, 5200, 5500, and so on. ">id</a>[4];</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;         ((uint8_t*)arg)[5] = 0;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="preprocessor">   #if _WIZCHIP_ ==  5500</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="preprocessor"></span>      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a6b28d9b2eb1f82b6fc1c9b0e58c2d99f" title="Resets internal PHY. Valid Only W5000. ">CW_RESET_PHY</a>:</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;         <a class="code" href="wizchip__conf_8c.html#a46a76bce886968fef0c9ff15f8a104d5" title="Reset phy. Vailid only in W5500. ">wizphy_reset</a>();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a2360c312f5437370e65000ad85205a05" title="When PHY configured by interal register, PHY operation mode (Manual/Auto, 10/100, Half/Full)...">CW_SET_PHYCONF</a>:</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;         <a class="code" href="group__extra__functions.html#ga60359c86bf85ccd5ca8f6e7cafc849dc" title="Set the phy information for WIZCHIP without power mode. ">wizphy_setphyconf</a>((<a class="code" href="structwiz___phy_conf__t.html">wiz_PhyConf</a>*)arg);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a90dbc0ba1567d6f67450c38136b928d1" title="Get PHY operation mode in interal register. Valid Only W5000. ">CW_GET_PHYCONF</a>:</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;         <a class="code" href="group__extra__functions.html#ga4745d0ce5551dd24df8550d4e0602aec" title="Get phy configuration information. ">wizphy_getphyconf</a>((<a class="code" href="structwiz___phy_conf__t.html">wiz_PhyConf</a>*)arg);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a73cae02488658f1fc27ccd322c391f02" title="Get real PHY status on operating. Valid Only W5000. ">CW_GET_PHYSTATUS</a>:</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a793ecc600c0be24791af73e3e5b4fdf3" title="Set PHY power mode as noraml and down when PHYSTATUS.OPMD == 1. Valid Only W5000. ...">CW_SET_PHYPOWMODE</a>:</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="group__extra__functions.html#ga64a4fd3427b5c5f43a3f35fb433cb06c" title="set the power mode of phy inside WIZCHIP. Refer to PHYCFGR in W5500, PHYSTATUS in W5200 ...">wizphy_setphypmode</a>(*(uint8_t*)arg);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="preprocessor">   #endif</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor"></span>      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44af2c60665ebee5c5e3b5c7088e671d256" title="Get PHY Power mode as down or normal. ">CW_GET_PHYPOWMODE</a>:</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;         tmp = <a class="code" href="wizchip__conf_8c.html#a337e51d795347c22d9b5a99a002c8c39" title="get the power mode of PHY in WIZCHIP. No use in W5100 ">wizphy_getphypmode</a>();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;         <span class="keywordflow">if</span>((int8_t)tmp == -1) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;         *(uint8_t*)arg = tmp;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggaca023f09ee4830a55aa38846e1bb3b44a1b3c2da3b49ab6072c69455877e0a6e1" title="Get PHY Link status. ">CW_GET_PHYLINK</a>:</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;         tmp = <a class="code" href="wizchip__conf_8c.html#a4236dcf85dce5f74aa27236cd82fa902" title="get the link status of phy in WIZCHIP. No use in W5100 ">wizphy_getphylink</a>();</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;         <span class="keywordflow">if</span>((int8_t)tmp == -1) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;         *(uint8_t*)arg = tmp;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;         <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga315235b3215e09b1230f4fae093a26b3">  248</a></span>&#160;int8_t <a class="code" href="group__extra__functions.html#ga315235b3215e09b1230f4fae093a26b3" title="Controls to network. ">ctlnetwork</a>(<a class="code" href="group___d_a_t_a___t_y_p_e.html#gabc27f589bbab92c248e76e7d15eb31e8">ctlnetwork_type</a> cntype, <span class="keywordtype">void</span>* arg)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <span class="keywordflow">switch</span>(cntype)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggabc27f589bbab92c248e76e7d15eb31e8aa0da954a5b2c47ffee3bed4a6c24328a" title="Set Network with wiz_NetInfo. ">CN_SET_NETINFO</a>:</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;         <a class="code" href="group__extra__functions.html#gaf581fa9246e4a5621936c7b83d18a0fa" title="Set the network information for WIZCHIP. ">wizchip_setnetinfo</a>((<a class="code" href="structwiz___net_info__t.html">wiz_NetInfo</a>*)arg);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggabc27f589bbab92c248e76e7d15eb31e8a7dbd12469e7535228b5a2d549201cda1" title="Get Network with wiz_NetInfo. ">CN_GET_NETINFO</a>:</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;         <a class="code" href="group__extra__functions.html#ga769cf8bbf0e35981777977e37443c766" title="Get the network information for WIZCHIP. ">wizchip_getnetinfo</a>((<a class="code" href="structwiz___net_info__t.html">wiz_NetInfo</a>*)arg);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggabc27f589bbab92c248e76e7d15eb31e8a4fcef35449d832255f57ebf515b7e56a" title="Set network mode as WOL, PPPoE, Ping Block, and Force ARP mode. ">CN_SET_NETMODE</a>:</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="group__extra__functions.html#gac4f457e87b5f9db2eccebb790a348e8c" title="Set the network mode such WOL, PPPoE, Ping Block, and etc. ">wizchip_setnetmode</a>(*(<a class="code" href="group___d_a_t_a___t_y_p_e.html#ga7543c641a8f3ad6dce26f2387e7e8eac">netmode_type</a>*)arg);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggabc27f589bbab92c248e76e7d15eb31e8a08e3615f49fe78b3efeed4de1d218965" title="Get network mode as WOL, PPPoE, Ping Block, and Force ARP mode. ">CN_GET_NETMODE</a>:</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;         *(<a class="code" href="group___d_a_t_a___t_y_p_e.html#ga7543c641a8f3ad6dce26f2387e7e8eac">netmode_type</a>*)arg = <a class="code" href="group__extra__functions.html#ga0313b6a7ced290f618912bf9de7791ab" title="Get the network mode such WOL, PPPoE, Ping Block, and etc. ">wizchip_getnetmode</a>();</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggabc27f589bbab92c248e76e7d15eb31e8af36fb2c237824056344abfb7f06165e4" title="Set network timeout as retry count and time. ">CN_SET_TIMEOUT</a>:</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;         <a class="code" href="group__extra__functions.html#ga91ca4b3716c77ed5a6a32757c53f7a02" title="Set retry time value(RTR) and retry count(RCR). ">wizchip_settimeout</a>((<a class="code" href="structwiz___net_timeout__t.html">wiz_NetTimeout</a>*)arg);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="group___d_a_t_a___t_y_p_e.html#ggabc27f589bbab92c248e76e7d15eb31e8a97ba1a36076ec029551c1307ace1ca8a" title="Get network timeout as retry count and time. ">CN_GET_TIMEOUT</a>:</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;         <a class="code" href="group__extra__functions.html#ga05f7ba1f50d0cb7a7db4207af9182644" title="Get retry time value(RTR) and retry count(RCR). ">wizchip_gettimeout</a>((<a class="code" href="structwiz___net_timeout__t.html">wiz_NetTimeout</a>*)arg);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;         <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga4033269f88b0e202837c4c56a1d8d437">  276</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__extra__functions.html#ga4033269f88b0e202837c4c56a1d8d437" title="Reset WIZCHIP by softly. ">wizchip_sw_reset</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   uint8_t gw[4], sn[4], sip[4];</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   uint8_t mac[6];</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   getSHAR(mac);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   getGAR(gw);  getSUBR(sn);  getSIPR(sip);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   setMR(MR_RST);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   getMR(); <span class="comment">// for delay</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   setSHAR(mac);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   setGAR(gw);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   setSUBR(sn);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   setSIPR(sip);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga1bd1977c0db22c93e1841f8353dd919e">  290</a></span>&#160;int8_t <a class="code" href="group__extra__functions.html#ga1bd1977c0db22c93e1841f8353dd919e" title="Initializes WIZCHIP with socket buffer size. ">wizchip_init</a>(uint8_t* txsize, uint8_t* rxsize)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;{</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   int8_t i;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   int8_t tmp = 0;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <a class="code" href="group__extra__functions.html#ga4033269f88b0e202837c4c56a1d8d437" title="Reset WIZCHIP by softly. ">wizchip_sw_reset</a>();</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keywordflow">if</span>(txsize)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      tmp = 0;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keywordflow">for</span>(i = 0 ; i &lt; <a class="code" href="wizchip__conf_8h.html#a70a4c5d01d3afb9fab3b6070ac27c857" title="The count of independant socket of WIZCHIP. ">_WIZCHIP_SOCK_NUM_</a>; i++)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;         tmp += txsize[i];</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">if</span>(tmp &gt; 16) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">for</span>(i = 0 ; i &lt; <a class="code" href="wizchip__conf_8h.html#a70a4c5d01d3afb9fab3b6070ac27c857" title="The count of independant socket of WIZCHIP. ">_WIZCHIP_SOCK_NUM_</a>; i++)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;         setSn_TXBUF_SIZE(i, txsize[i]);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <span class="keywordflow">if</span>(rxsize)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   {</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      tmp = 0;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">for</span>(i = 0 ; i &lt; <a class="code" href="wizchip__conf_8h.html#a70a4c5d01d3afb9fab3b6070ac27c857" title="The count of independant socket of WIZCHIP. ">_WIZCHIP_SOCK_NUM_</a>; i++)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;         tmp += rxsize[i];</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">if</span>(tmp &gt; 16) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">for</span>(i = 0 ; i &lt; <a class="code" href="wizchip__conf_8h.html#a70a4c5d01d3afb9fab3b6070ac27c857" title="The count of independant socket of WIZCHIP. ">_WIZCHIP_SOCK_NUM_</a>; i++)</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;         setSn_RXBUF_SIZE(i, rxsize[i]);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   }</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga41f91261077bc64e240d506923c29181">  316</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__extra__functions.html#ga41f91261077bc64e240d506923c29181" title="Clear Interrupt of WIZCHIP. ">wizchip_clrinterrupt</a>(<a class="code" href="group___d_a_t_a___t_y_p_e.html#gac6b85cbd7d245ccf3cbfa734760d6ed3">intr_kind</a> intr)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   uint8_t ir  = (uint8_t)intr;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   uint8_t sir = (uint8_t)((uint16_t)intr &gt;&gt; 8);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="preprocessor">#if _WIZCHIP_ &lt; 5500</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor"></span>   ir |= (1&lt;&lt;4); <span class="comment">// IK_WOL</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#if _WIZCHIP_ == 5200</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor"></span>   ir |= (1 &lt;&lt; 6);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="preprocessor"></span>   </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor">#if _WIZCHIP_ &lt; 5200</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor"></span>   sir &amp;= 0x0F;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="preprocessor">#if _WIZCHIP_ == 5100</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor"></span>   ir |= sir;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   setIR(ir);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="preprocessor"></span>   setIR(ir);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   setSIR(sir);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="preprocessor">#endif   </span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="preprocessor"></span>}</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="code" href="group__extra__functions.html#gae5858fe7ca3d498e9fec4c3457a02e2e">  340</a></span>&#160;<a class="code" href="group___d_a_t_a___t_y_p_e.html#gac6b85cbd7d245ccf3cbfa734760d6ed3">intr_kind</a> <a class="code" href="group__extra__functions.html#gae5858fe7ca3d498e9fec4c3457a02e2e" title="Get Interrupt of WIZCHIP. ">wizchip_getinterrupt</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   uint8_t ir  = 0;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   uint8_t sir = 0;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   uint16_t ret = 0;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="preprocessor">#if _WIZCHIP_ == 5100</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor"></span>   ir = getIR();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   sir = ir 0x0F;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="preprocessor"></span>   ir  = getIR();</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   sir = getSIR();</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="preprocessor">#endif         </span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="preprocessor">#if _WIZCHIP_ &lt; 5500</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="preprocessor"></span>   ir &amp;= ~(1&lt;&lt;4); <span class="comment">// IK_WOL</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#if _WIZCHIP_ == 5200</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor"></span>   ir &amp;= ~(1 &lt;&lt; 6);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="preprocessor"></span>  ret = sir;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  ret = (ret &lt;&lt; 8) + ir;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="group___d_a_t_a___t_y_p_e.html#gac6b85cbd7d245ccf3cbfa734760d6ed3">intr_kind</a>)ret;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;}</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno"><a class="code" href="group__extra__functions.html#gafb30bdc1c5333b6bb67bdd20399b0f38">  364</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__extra__functions.html#gafb30bdc1c5333b6bb67bdd20399b0f38" title="Mask or Unmask Interrupt of WIZCHIP. ">wizchip_setinterruptmask</a>(<a class="code" href="group___d_a_t_a___t_y_p_e.html#gac6b85cbd7d245ccf3cbfa734760d6ed3">intr_kind</a> intr)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;{</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   uint8_t imr  = (uint8_t)intr;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   uint8_t simr = (uint8_t)((uint16_t)intr &gt;&gt; 8);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor">#if _WIZCHIP_ &lt; 5500</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="preprocessor"></span>   imr &amp;= ~(1&lt;&lt;4); <span class="comment">// IK_WOL</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#if _WIZCHIP_ == 5200</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="preprocessor"></span>   imr &amp;= ~(1 &lt;&lt; 6);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor"></span>   </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="preprocessor">#if _WIZCHIP_ &lt; 5200</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor"></span>   simr &amp;= 0x0F;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="preprocessor">#if _WIZCHIP_ == 5100</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor"></span>   imr |= simr;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   setIMR(imr);</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="preprocessor"></span>   setIMR(imr);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   setSIMR(simr);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">#endif   </span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor"></span>}</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga54ab95788a37781b24e2279022a8705b">  388</a></span>&#160;<a class="code" href="group___d_a_t_a___t_y_p_e.html#gac6b85cbd7d245ccf3cbfa734760d6ed3">intr_kind</a> <a class="code" href="group__extra__functions.html#ga54ab95788a37781b24e2279022a8705b" title="Get Interrupt mask of WIZCHIP. ">wizchip_getinterruptmask</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;{</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   uint8_t imr  = 0;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   uint8_t simr = 0;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   uint16_t ret = 0;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="preprocessor">#if _WIZCHIP_ == 5100</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor"></span>   imr  = getIMR();</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   simr = imr 0x0F;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor"></span>   imr  = getIMR();</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   simr = getSIMR();</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">#endif         </span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">#if _WIZCHIP_ &lt; 5500</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="preprocessor"></span>   imr &amp;= ~(1&lt;&lt;4); <span class="comment">// IK_WOL</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#if _WIZCHIP_ == 5200</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="preprocessor"></span>   imr &amp;= ~(1 &lt;&lt; 6);  <span class="comment">// IK_DEST_UNREACH</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="preprocessor"></span>  ret = simr;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  ret = (ret &lt;&lt; 8) + imr;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="group___d_a_t_a___t_y_p_e.html#gac6b85cbd7d245ccf3cbfa734760d6ed3">intr_kind</a>)ret;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;}</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div>
<div class="line"><a name="l00412"></a><span class="lineno"><a class="code" href="wizchip__conf_8h.html#a4236dcf85dce5f74aa27236cd82fa902">  412</a></span>&#160;int8_t <a class="code" href="wizchip__conf_8c.html#a4236dcf85dce5f74aa27236cd82fa902" title="get the link status of phy in WIZCHIP. No use in W5100 ">wizphy_getphylink</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;{</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   int8_t tmp;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="preprocessor">#if   _WIZCHIP_ == 5200</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor"></span>   <span class="keywordflow">if</span>(getPHYSTATUS() &amp; PHYSTATUS_LINK)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      tmp = <a class="code" href="wizchip__conf_8h.html#acb165f18d53ffaa8c7691312e76e8d43" title="Link On. ">PHY_LINK_ON</a>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      tmp = <a class="code" href="wizchip__conf_8h.html#a471064afdaa53206fb0ef209e1c8257e" title="Link Off. ">PHY_LINK_OFF</a>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="preprocessor">#elif _WIZCHIP_ == 5500</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="preprocessor"></span>   <span class="keywordflow">if</span>(getPHYCFGR() &amp; PHYCFGR_LNK_ON)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      tmp = <a class="code" href="wizchip__conf_8h.html#acb165f18d53ffaa8c7691312e76e8d43" title="Link On. ">PHY_LINK_ON</a>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      tmp = <a class="code" href="wizchip__conf_8h.html#a471064afdaa53206fb0ef209e1c8257e" title="Link Off. ">PHY_LINK_OFF</a>;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="preprocessor"></span>   tmp = -1;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor"></span>   <span class="keywordflow">return</span> tmp;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="preprocessor">#if _WIZCHIP_ &gt; 5100</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00433"></a><span class="lineno"><a class="code" href="wizchip__conf_8h.html#a337e51d795347c22d9b5a99a002c8c39">  433</a></span>&#160;int8_t <a class="code" href="wizchip__conf_8c.html#a337e51d795347c22d9b5a99a002c8c39" title="get the power mode of PHY in WIZCHIP. No use in W5100 ">wizphy_getphypmode</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;{</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   int8_t tmp = 0;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="preprocessor">   #if   _WIZCHIP_ == 5200</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor"></span>      <span class="keywordflow">if</span>(getPHYSTATUS() &amp; PHYSTATUS_POWERDOWN)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;         tmp = <a class="code" href="wizchip__conf_8h.html#a6a72de7df3c5d48c93dbbac2248d566d" title="PHY power down mode. ">PHY_POWER_DOWN</a>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordflow">else</span>          </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;         tmp = <a class="code" href="wizchip__conf_8h.html#aec45fdaf72e12f9b7958c77bb4ff4913" title="PHY power normal mode. ">PHY_POWER_NORM</a>;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="preprocessor">   #elif _WIZCHIP_ == 5500</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="preprocessor"></span>      <span class="keywordflow">if</span>(getPHYCFGR() &amp; PHYCFGR_OPMDC_PDOWN)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;         tmp = <a class="code" href="wizchip__conf_8h.html#a6a72de7df3c5d48c93dbbac2248d566d" title="PHY power down mode. ">PHY_POWER_DOWN</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;         tmp = <a class="code" href="wizchip__conf_8h.html#aec45fdaf72e12f9b7958c77bb4ff4913" title="PHY power normal mode. ">PHY_POWER_NORM</a>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="preprocessor">   #else</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="preprocessor"></span>      tmp = -1;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">   #endif</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="preprocessor"></span>   <span class="keywordflow">return</span> tmp;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="preprocessor">#if _WIZCHIP_ == 5500</span></div>
<div class="line"><a name="l00454"></a><span class="lineno"><a class="code" href="wizchip__conf_8h.html#a46a76bce886968fef0c9ff15f8a104d5">  454</a></span>&#160;<span class="preprocessor"></span><span class="keywordtype">void</span> <a class="code" href="wizchip__conf_8c.html#a46a76bce886968fef0c9ff15f8a104d5" title="Reset phy. Vailid only in W5500. ">wizphy_reset</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;{</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   uint8_t tmp = getPHYCFGR();</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   tmp &amp;= PHYCFGR_RST;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   setPHYCFGR(tmp);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   tmp = getPHYCFGR(); </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   tmp |= ~PHYCFGR_RST;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   setPHYCFGR(tmp);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;}</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga60359c86bf85ccd5ca8f6e7cafc849dc">  464</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__extra__functions.html#ga60359c86bf85ccd5ca8f6e7cafc849dc" title="Set the phy information for WIZCHIP without power mode. ">wizphy_setphyconf</a>(<a class="code" href="structwiz___phy_conf__t.html">wiz_PhyConf</a>* phyconf)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;{</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   uint8_t tmp = 0;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keywordflow">if</span>(phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a59b0be57ff79e69bd30dcbbfd9fceacf" title="set by PHY_CONFBY_HW or PHY_CONFBY_SW ">by</a> == <a class="code" href="wizchip__conf_8h.html#a2c4dfff024962b4a520a0f64c5b482c7" title="Configured PHY operation mode by SW register. ">PHY_CONFBY_SW</a>)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      tmp |= PHYCFGR_OPMD;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      tmp &amp;= ~PHYCFGR_OPMD;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="keywordflow">if</span>(phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a08fbc557790c3a9ffd15e179d8c1884f" title="set by PHY_MODE_MANUAL or PHY_MODE_AUTONEGO ">mode</a> == <a class="code" href="wizchip__conf_8h.html#a0fec3063a62bbbc9ed44004fe8d565ad" title="Configured PHY operation mode with auto-negotiation. ">PHY_MODE_AUTONEGO</a>)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      tmp |= PHYCFGR_OPMDC_ALLA;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">if</span>(phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a42f9d62936cfdf563c3d1c25a0c88cf2" title="set by PHY_DUPLEX_HALF PHY_DUPLEX_FULL ">duplex</a> == <a class="code" href="wizchip__conf_8h.html#a917f75644ef5f928c69d70f66883a4fa" title="Link Full-Duplex. ">PHY_DUPLEX_FULL</a>)</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;         <span class="keywordflow">if</span>(phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a6d2408f16a514c024e68f1faba61440b" title="set by PHY_SPEED_10 or PHY_SPEED_100 ">speed</a> == <a class="code" href="wizchip__conf_8h.html#ad5fdd2d68e54573c921a7e790c541d70" title="Link Speed 100. ">PHY_SPEED_100</a>)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            tmp |= PHYCFGR_OPMDC_100F;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            tmp |= PHYCFGR_OPMDC_10F;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      }   </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      {</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;         <span class="keywordflow">if</span>(phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a6d2408f16a514c024e68f1faba61440b" title="set by PHY_SPEED_10 or PHY_SPEED_100 ">speed</a> == <a class="code" href="wizchip__conf_8h.html#ad5fdd2d68e54573c921a7e790c541d70" title="Link Speed 100. ">PHY_SPEED_100</a>)</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            tmp |= PHYCFGR_OPMDC_100H;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            tmp |= PHYCFGR_OPMDC_10H;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   setPHYCFGR(tmp);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <a class="code" href="wizchip__conf_8c.html#a46a76bce886968fef0c9ff15f8a104d5" title="Reset phy. Vailid only in W5500. ">wizphy_reset</a>();</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;}</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga4745d0ce5551dd24df8550d4e0602aec">  494</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__extra__functions.html#ga4745d0ce5551dd24df8550d4e0602aec" title="Get phy configuration information. ">wizphy_getphyconf</a>(<a class="code" href="structwiz___phy_conf__t.html">wiz_PhyConf</a>* phyconf)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;{</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   uint8_t tmp = 0;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   tmp = getPHYCFGR();</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a59b0be57ff79e69bd30dcbbfd9fceacf" title="set by PHY_CONFBY_HW or PHY_CONFBY_SW ">by</a>   = (tmp &amp; PHYCFGR_OPMD) ? <a class="code" href="wizchip__conf_8h.html#a2c4dfff024962b4a520a0f64c5b482c7" title="Configured PHY operation mode by SW register. ">PHY_CONFBY_SW</a> : <a class="code" href="wizchip__conf_8h.html#a041ee84835137a0e9b44195c59094058" title="Configured PHY operation mode by HW pin. ">PHY_CONFBY_HW</a>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keywordflow">switch</span>(tmp &amp; PHYCFGR_OPMDC_ALLA)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="keywordflow">case</span> PHYCFGR_OPMDC_ALLA:</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">case</span> PHYCFGR_OPMDC_100FA: </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;         phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a08fbc557790c3a9ffd15e179d8c1884f" title="set by PHY_MODE_MANUAL or PHY_MODE_AUTONEGO ">mode</a> = <a class="code" href="wizchip__conf_8h.html#a0fec3063a62bbbc9ed44004fe8d565ad" title="Configured PHY operation mode with auto-negotiation. ">PHY_MODE_AUTONEGO</a>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;         phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a08fbc557790c3a9ffd15e179d8c1884f" title="set by PHY_MODE_MANUAL or PHY_MODE_AUTONEGO ">mode</a> = <a class="code" href="wizchip__conf_8h.html#ada95bdaad545f87518e3d60760345eba" title="Configured PHY operation mode with user setting. ">PHY_MODE_MANUAL</a>;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">switch</span>(tmp &amp; PHYCFGR_OPMDC_ALLA)</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="keywordflow">case</span> PHYCFGR_OPMDC_100FA:</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="keywordflow">case</span> PHYCFGR_OPMDC_100F:</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="keywordflow">case</span> PHYCFGR_OPMDC_100H:</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;         phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a6d2408f16a514c024e68f1faba61440b" title="set by PHY_SPEED_10 or PHY_SPEED_100 ">speed</a> = <a class="code" href="wizchip__conf_8h.html#ad5fdd2d68e54573c921a7e790c541d70" title="Link Speed 100. ">PHY_SPEED_100</a>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;         phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a6d2408f16a514c024e68f1faba61440b" title="set by PHY_SPEED_10 or PHY_SPEED_100 ">speed</a> = <a class="code" href="wizchip__conf_8h.html#ae18a71e8a9558b4cead60cee7a438cf1" title="Link Speed 10. ">PHY_SPEED_10</a>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   <span class="keywordflow">switch</span>(tmp &amp; PHYCFGR_OPMDC_ALLA)</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">case</span> PHYCFGR_OPMDC_100FA:</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keywordflow">case</span> PHYCFGR_OPMDC_100F:</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="keywordflow">case</span> PHYCFGR_OPMDC_10F:</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;         phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a42f9d62936cfdf563c3d1c25a0c88cf2" title="set by PHY_DUPLEX_HALF PHY_DUPLEX_FULL ">duplex</a> = <a class="code" href="wizchip__conf_8h.html#a917f75644ef5f928c69d70f66883a4fa" title="Link Full-Duplex. ">PHY_DUPLEX_FULL</a>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;         phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a42f9d62936cfdf563c3d1c25a0c88cf2" title="set by PHY_DUPLEX_HALF PHY_DUPLEX_FULL ">duplex</a> = <a class="code" href="wizchip__conf_8h.html#a9e54992dd7df699ba0a6b8846c4bd503" title="Link Half-Duplex. ">PHY_DUPLEX_HALF</a>;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   }</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;}</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div>
<div class="line"><a name="l00533"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga6ab08d93c02389fe12590ba0c677a965">  533</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__extra__functions.html#ga6ab08d93c02389fe12590ba0c677a965" title="Get phy status. ">wizphy_getphystat</a>(<a class="code" href="structwiz___phy_conf__t.html">wiz_PhyConf</a>* phyconf)</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;{</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   uint8_t tmp = getPHYCFGR();</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a42f9d62936cfdf563c3d1c25a0c88cf2" title="set by PHY_DUPLEX_HALF PHY_DUPLEX_FULL ">duplex</a> = (tmp &amp; PHYCFGR_DPX_FULL) ? <a class="code" href="wizchip__conf_8h.html#a917f75644ef5f928c69d70f66883a4fa" title="Link Full-Duplex. ">PHY_DUPLEX_FULL</a> : <a class="code" href="wizchip__conf_8h.html#a9e54992dd7df699ba0a6b8846c4bd503" title="Link Half-Duplex. ">PHY_DUPLEX_HALF</a>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   phyconf-&gt;<a class="code" href="structwiz___phy_conf__t.html#a6d2408f16a514c024e68f1faba61440b" title="set by PHY_SPEED_10 or PHY_SPEED_100 ">speed</a>  = (tmp &amp; PHYCFGR_SPD_100) ? <a class="code" href="wizchip__conf_8h.html#ad5fdd2d68e54573c921a7e790c541d70" title="Link Speed 100. ">PHY_SPEED_100</a> : <a class="code" href="wizchip__conf_8h.html#ae18a71e8a9558b4cead60cee7a438cf1" title="Link Speed 10. ">PHY_SPEED_10</a>;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;}</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga64a4fd3427b5c5f43a3f35fb433cb06c">  540</a></span>&#160;int8_t <a class="code" href="group__extra__functions.html#ga64a4fd3427b5c5f43a3f35fb433cb06c" title="set the power mode of phy inside WIZCHIP. Refer to PHYCFGR in W5500, PHYSTATUS in W5200 ...">wizphy_setphypmode</a>(uint8_t pmode)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;{</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   uint8_t tmp = 0;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   tmp = getPHYCFGR();</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <span class="keywordflow">if</span>((tmp &amp; PHYCFGR_OPMD)== 0) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   tmp &amp;= ~PHYCFGR_OPMDC_ALLA;         </div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;   <span class="keywordflow">if</span>( pmode == <a class="code" href="wizchip__conf_8h.html#a6a72de7df3c5d48c93dbbac2248d566d" title="PHY power down mode. ">PHY_POWER_DOWN</a>)</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      tmp |= PHYCFGR_OPMDC_PDOWN;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      tmp |= PHYCFGR_OPMDC_ALLA;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   setPHYCFGR(tmp);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <a class="code" href="wizchip__conf_8c.html#a46a76bce886968fef0c9ff15f8a104d5" title="Reset phy. Vailid only in W5500. ">wizphy_reset</a>();</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   tmp = getPHYCFGR();</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keywordflow">if</span>( pmode == <a class="code" href="wizchip__conf_8h.html#a6a72de7df3c5d48c93dbbac2248d566d" title="PHY power down mode. ">PHY_POWER_DOWN</a>)</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">if</span>(tmp &amp; PHYCFGR_OPMDC_PDOWN) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">if</span>(tmp &amp; PHYCFGR_OPMDC_ALLA) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00566"></a><span class="lineno"><a class="code" href="group__extra__functions.html#gaf581fa9246e4a5621936c7b83d18a0fa">  566</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__extra__functions.html#gaf581fa9246e4a5621936c7b83d18a0fa" title="Set the network information for WIZCHIP. ">wizchip_setnetinfo</a>(<a class="code" href="structwiz___net_info__t.html">wiz_NetInfo</a>* pnetinfo)</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;{</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   setSHAR(pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#ae9c5f0c32486ae54d9a149ad368e1b15" title="Source Mac Address. ">mac</a>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   setGAR(pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#a6a78be2d765ba8e6f00ab9570ea6d702" title="Gateway IP Address. ">gw</a>);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   setSUBR(pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#ad2dc7c0a2b935879c34046a095c2006a" title="Subnet Mask. ">sn</a>);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   setSIPR(pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#acf3c4fdbc1f0701b795c9962c66f6979" title="Source IP Address. ">ip</a>);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   _DNS_[0] = pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#a51a0066964c8a7dcb02e8740858696bb" title="DNS server IP Address. ">dns</a>[0];</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   _DNS_[1] = pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#a51a0066964c8a7dcb02e8740858696bb" title="DNS server IP Address. ">dns</a>[1];</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   _DNS_[2] = pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#a51a0066964c8a7dcb02e8740858696bb" title="DNS server IP Address. ">dns</a>[2];</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   _DNS_[3] = pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#a51a0066964c8a7dcb02e8740858696bb" title="DNS server IP Address. ">dns</a>[3];</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   _DHCP_   = pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#a763202a23c996695abad319fc6e60dcf" title="1 - Static, 2 - DHCP ">dhcp</a>;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00579"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga769cf8bbf0e35981777977e37443c766">  579</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__extra__functions.html#ga769cf8bbf0e35981777977e37443c766" title="Get the network information for WIZCHIP. ">wizchip_getnetinfo</a>(<a class="code" href="structwiz___net_info__t.html">wiz_NetInfo</a>* pnetinfo)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;{</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   getSHAR(pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#ae9c5f0c32486ae54d9a149ad368e1b15" title="Source Mac Address. ">mac</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   getGAR(pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#a6a78be2d765ba8e6f00ab9570ea6d702" title="Gateway IP Address. ">gw</a>);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   getSUBR(pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#ad2dc7c0a2b935879c34046a095c2006a" title="Subnet Mask. ">sn</a>);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   getSIPR(pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#acf3c4fdbc1f0701b795c9962c66f6979" title="Source IP Address. ">ip</a>);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#a51a0066964c8a7dcb02e8740858696bb" title="DNS server IP Address. ">dns</a>[0]= _DNS_[0];</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#a51a0066964c8a7dcb02e8740858696bb" title="DNS server IP Address. ">dns</a>[1]= _DNS_[1];</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#a51a0066964c8a7dcb02e8740858696bb" title="DNS server IP Address. ">dns</a>[2]= _DNS_[2];</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#a51a0066964c8a7dcb02e8740858696bb" title="DNS server IP Address. ">dns</a>[3]= _DNS_[3];</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   pnetinfo-&gt;<a class="code" href="structwiz___net_info__t.html#a763202a23c996695abad319fc6e60dcf" title="1 - Static, 2 - DHCP ">dhcp</a>  = _DHCP_;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;}</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div>
<div class="line"><a name="l00592"></a><span class="lineno"><a class="code" href="group__extra__functions.html#gac4f457e87b5f9db2eccebb790a348e8c">  592</a></span>&#160;int8_t <a class="code" href="group__extra__functions.html#gac4f457e87b5f9db2eccebb790a348e8c" title="Set the network mode such WOL, PPPoE, Ping Block, and etc. ">wizchip_setnetmode</a>(<a class="code" href="group___d_a_t_a___t_y_p_e.html#ga7543c641a8f3ad6dce26f2387e7e8eac">netmode_type</a> netmode)</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;{</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   uint8_t tmp = 0;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="preprocessor">#if _WIZCHIP_ != 5500   </span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="preprocessor"></span>   <span class="keywordflow">if</span>(netmode &amp; ~(<a class="code" href="group___d_a_t_a___t_y_p_e.html#gga7543c641a8f3ad6dce26f2387e7e8eaca273098a5481a025f536a599c6a008759" title="Wake On Lan. ">NM_WAKEONLAN</a> | <a class="code" href="group___d_a_t_a___t_y_p_e.html#gga7543c641a8f3ad6dce26f2387e7e8eaca37ebbd5edda6ee0dccfcd481d4690416" title="PPPoE mode. ">NM_PPPOE</a> | <a class="code" href="group___d_a_t_a___t_y_p_e.html#gga7543c641a8f3ad6dce26f2387e7e8eaca8e9226206aa8567b284ede0dff7540be" title="Block ping-request. ">NM_PINGBLOCK</a>)) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="preprocessor"></span>   <span class="keywordflow">if</span>(netmode &amp; ~(<a class="code" href="group___d_a_t_a___t_y_p_e.html#gga7543c641a8f3ad6dce26f2387e7e8eaca273098a5481a025f536a599c6a008759" title="Wake On Lan. ">NM_WAKEONLAN</a> | <a class="code" href="group___d_a_t_a___t_y_p_e.html#gga7543c641a8f3ad6dce26f2387e7e8eaca37ebbd5edda6ee0dccfcd481d4690416" title="PPPoE mode. ">NM_PPPOE</a> | <a class="code" href="group___d_a_t_a___t_y_p_e.html#gga7543c641a8f3ad6dce26f2387e7e8eaca8e9226206aa8567b284ede0dff7540be" title="Block ping-request. ">NM_PINGBLOCK</a> | <a class="code" href="group___d_a_t_a___t_y_p_e.html#gga7543c641a8f3ad6dce26f2387e7e8eaca32c5ae489d34cf2de9ff96ae278f028a" title="Force to APP send whenever udp data is sent. Valid only in W5500. ">NM_FORCEARP</a>)) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="preprocessor">#endif      </span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="preprocessor"></span>   tmp = getMR();</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   tmp |= (uint8_t)netmode;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   setMR(tmp);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga0313b6a7ced290f618912bf9de7791ab">  606</a></span>&#160;<a class="code" href="group___d_a_t_a___t_y_p_e.html#ga7543c641a8f3ad6dce26f2387e7e8eac">netmode_type</a> <a class="code" href="group__extra__functions.html#ga0313b6a7ced290f618912bf9de7791ab" title="Get the network mode such WOL, PPPoE, Ping Block, and etc. ">wizchip_getnetmode</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;{</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="keywordflow">return</span> (<a class="code" href="group___d_a_t_a___t_y_p_e.html#ga7543c641a8f3ad6dce26f2387e7e8eac">netmode_type</a>) getMR();</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;}</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga91ca4b3716c77ed5a6a32757c53f7a02">  611</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__extra__functions.html#ga91ca4b3716c77ed5a6a32757c53f7a02" title="Set retry time value(RTR) and retry count(RCR). ">wizchip_settimeout</a>(<a class="code" href="structwiz___net_timeout__t.html">wiz_NetTimeout</a>* nettime)</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;{</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   setRCR(nettime-&gt;<a class="code" href="structwiz___net_timeout__t.html#a5d33e21e06eae14bf79488d36097d073" title="retry count ">retry_cnt</a>);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   setRTR(nettime-&gt;<a class="code" href="structwiz___net_timeout__t.html#a65f6be16231eee9449e9561601ad6f57" title="time unit 100us ">time_100us</a>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00617"></a><span class="lineno"><a class="code" href="group__extra__functions.html#ga05f7ba1f50d0cb7a7db4207af9182644">  617</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group__extra__functions.html#ga05f7ba1f50d0cb7a7db4207af9182644" title="Get retry time value(RTR) and retry count(RCR). ">wizchip_gettimeout</a>(<a class="code" href="structwiz___net_timeout__t.html">wiz_NetTimeout</a>* nettime)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;{</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   nettime-&gt;<a class="code" href="structwiz___net_timeout__t.html#a5d33e21e06eae14bf79488d36097d073" title="retry count ">retry_cnt</a> = getRCR();</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   nettime-&gt;<a class="code" href="structwiz___net_timeout__t.html#a65f6be16231eee9449e9561601ad6f57" title="time unit 100us ">time_100us</a> = getRTR();</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 19 2013 18:24:52 for Socket APIs by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
